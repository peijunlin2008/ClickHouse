---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v25.12.6.38-stable (8bca0c86b58) FIXME as compared to v25.12.5.44-stable (6b09ccf262f)

#### Performance Improvement
* Backported in [#97061](https://github.com/ClickHouse/ClickHouse/issues/97061): If a `FINAL` query used primary key condition for filtering followed by skip indexes for other conditions, the `PrimaryKeyExpand` processing step will now only check the initial shortlisted primary key ranges for intersection. [#94903](https://github.com/ClickHouse/ClickHouse/pull/94903) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Backported in [#96176](https://github.com/ClickHouse/ClickHouse/issues/96176): Trim size of CachedOnDiskReadBufferFromFile structure 50x. [#96098](https://github.com/ClickHouse/ClickHouse/pull/96098) ([Azat Khuzhin](https://github.com/azat)).

#### Improvement
* Backported in [#95834](https://github.com/ClickHouse/ClickHouse/issues/95834): Bump internal libxml2 to 2.15.1. [#95574](https://github.com/ClickHouse/ClickHouse/pull/95574) ([Robert Schulze](https://github.com/rschu1ze)).
* Backported in [#96434](https://github.com/ClickHouse/ClickHouse/issues/96434): Skip object storage reads when querying `DeltaLake` tables from system.tables. [#95899](https://github.com/ClickHouse/ClickHouse/pull/95899) ([Antonio Andelic](https://github.com/antonio2368)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#97329](https://github.com/ClickHouse/ClickHouse/issues/97329): Remove unnecessary skip permissions check in `ATTACH` queries for a view with SQL Security. This prevents potential privilege escalation when a user attaches a view with a definer without validating required access. [#94865](https://github.com/ClickHouse/ClickHouse/pull/94865) ([pufit](https://github.com/pufit)).
* Backported in [#95816](https://github.com/ClickHouse/ClickHouse/issues/95816): Fixed type inference for qualified columns from source tables when multiple joins are used with `USING` clause. Previously, subsequent joins incorrectly updated types of underlying source columns to a common supertype even when the column was not involved in that join (e.g., in `SELECT t2.a FROM t1 LEFT JOIN t2 USING (a) LEFT JOIN t3 USING (a)`, the `t2.a` column is only used by the first join, so its type should be the supertype of `t1.a` and `t2.a`, excluding `t3.a`). This could lead to logical errors or crashes when functions expected different column types than what actually appeared in the execution plan. [#95157](https://github.com/ClickHouse/ClickHouse/pull/95157) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#96394](https://github.com/ClickHouse/ClickHouse/issues/96394): Fix a logical error in some cases when negative `LIMIT/OFFSET` is used in distributed queries. [#95357](https://github.com/ClickHouse/ClickHouse/pull/95357) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96220](https://github.com/ClickHouse/ClickHouse/issues/96220): Fix crash during `tupleElement` applied to arrays of JSON. Closes [#95581](https://github.com/ClickHouse/ClickHouse/issues/95581). [#95647](https://github.com/ClickHouse/ClickHouse/pull/95647) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#96054](https://github.com/ClickHouse/ClickHouse/issues/96054): Fix squashing partitioned delta lake data. [#95773](https://github.com/ClickHouse/ClickHouse/pull/95773) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#96084](https://github.com/ClickHouse/ClickHouse/issues/96084): Fixed a `NOT_SUPPORTED` error that could occur when using the `direct` join algorithm with an empty MergeTree table. [#95935](https://github.com/ClickHouse/ClickHouse/pull/95935) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#96213](https://github.com/ClickHouse/ClickHouse/issues/96213): Fix skipping paths in JSON data type. Previously with `JSON(SKIP path)` all JSON keys with prefix `path` were skipped, even keys like `"pathpath"`, so it could lead to data loss for these paths during insert. Now it's fixed and only key `"path"` is skipped. [#95948](https://github.com/ClickHouse/ClickHouse/pull/95948) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#96080](https://github.com/ClickHouse/ClickHouse/issues/96080): Fix period for global profilers (controlled by `global_profiler_real_time_period_ns` and `global_profiler_cpu_time_period_ns`). Instead of set value, a truncated value was used, causing profiler to wakeup more than intended. [#96048](https://github.com/ClickHouse/ClickHouse/pull/96048) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#96542](https://github.com/ClickHouse/ClickHouse/issues/96542): Fix revoking default roles. [#96103](https://github.com/ClickHouse/ClickHouse/pull/96103) ([Vitaly Baranov](https://github.com/vitlibar)).
* Backported in [#96160](https://github.com/ClickHouse/ClickHouse/issues/96160): Fix use-after-free in the index analysis in a rare combination of disabled `use_primary_key` and a very large number of disjunctions of conditions that use the index. [#96112](https://github.com/ClickHouse/ClickHouse/pull/96112) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96157](https://github.com/ClickHouse/ClickHouse/issues/96157): Fix use-of-uninitialized-value in `formatDateTime` with non-fixed-width formatters, such as MySQL and JODA-style. [#96133](https://github.com/ClickHouse/ClickHouse/pull/96133) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97153](https://github.com/ClickHouse/ClickHouse/issues/97153): Fix `AccessRights::contains` returning incorrect results with partial revokes. [#96170](https://github.com/ClickHouse/ClickHouse/pull/96170) ([pufit](https://github.com/pufit)).
* Backported in [#96280](https://github.com/ClickHouse/ClickHouse/issues/96280): Fix possible deadlock in ProcessList. It can happen because of possible lock inversion if memory overcommit tracker triggers when we are adding task to cancellation checker. [#96182](https://github.com/ClickHouse/ClickHouse/pull/96182) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#96462](https://github.com/ClickHouse/ClickHouse/issues/96462): Fixed a bug where queries involving outer joins (LEFT, RIGHT, or FULL) combined with multiple INNER JOINs could return incorrect results due to illegal join reordering. When an outer join's ON condition referenced columns from multiple previously joined tables, the optimizer failed to account for all table dependencies and could reorder the joins incorrectly, producing missing rows. Close [#95972](https://github.com/ClickHouse/ClickHouse/issues/95972). [#96193](https://github.com/ClickHouse/ClickHouse/pull/96193) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#96562](https://github.com/ClickHouse/ClickHouse/issues/96562): When a table has no statistics defined, ClickHouse shouldn't try to them. This avoids some overhead (100+ms) for checking if the statistics files exist. (issue [#96068](https://github.com/ClickHouse/ClickHouse/issues/96068)). [#96233](https://github.com/ClickHouse/ClickHouse/pull/96233) ([Han Fei](https://github.com/hanfei1991)).
* Backported in [#96386](https://github.com/ClickHouse/ClickHouse/issues/96386): Fix incorrect partition pruning for `not IN` and `not has` function in some cases. [#96241](https://github.com/ClickHouse/ClickHouse/pull/96241) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96327](https://github.com/ClickHouse/ClickHouse/issues/96327): Fix `stack-use-after-scope` in the vector similarity index. [#96259](https://github.com/ClickHouse/ClickHouse/pull/96259) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96532](https://github.com/ClickHouse/ClickHouse/issues/96532): Fixes livelock in the cancellation checker thread for queries with high `max_execution_time` values. [#96450](https://github.com/ClickHouse/ClickHouse/pull/96450) ([Sergei Trifonov](https://github.com/serxa)).
* Backported in [#96693](https://github.com/ClickHouse/ClickHouse/issues/96693): Validate witness version in bech32 to avoid buffer overflow. [#96671](https://github.com/ClickHouse/ClickHouse/pull/96671) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#97206](https://github.com/ClickHouse/ClickHouse/issues/97206): Fix `min(timestamp)` returning epoch (`1970-01-01`) via `_minmax_count_projection` after TTL merge when all rows in a block are filtered out. [#96703](https://github.com/ClickHouse/ClickHouse/pull/96703) ([Raquel Barbadillo](https://github.com/rbarbadillo)).
* Backported in [#96919](https://github.com/ClickHouse/ClickHouse/issues/96919): Fixed `ALTER TABLE DROP COLUMN` queries failing after a lightweight update was previously performed on the same column. [#96861](https://github.com/ClickHouse/ClickHouse/pull/96861) ([Anton Popov](https://github.com/CurtizJ)).
* Backported in [#96938](https://github.com/ClickHouse/ClickHouse/issues/96938): Fix `std::terminate` exception in `indexOfAssumeSorted` when called with incompatible types (e.g., `IPv4` array with integer search value). [#96877](https://github.com/ClickHouse/ClickHouse/pull/96877) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97049](https://github.com/ClickHouse/ClickHouse/issues/97049): Fix exception `Bad cast from type DB::ColumnNullable to DB::ColumnString` when using window functions with `group_by_use_nulls = 1` and CUBE/ROLLUP/GROUPING SETS. [#96878](https://github.com/ClickHouse/ClickHouse/pull/96878) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97125](https://github.com/ClickHouse/ClickHouse/issues/97125): Fix crash (SEGFAULT) in `clearCaches` caused by `BlockIO::operator=` not moving `query_metadata_cache`, leading to premature destruction of cached storage snapshots and use-after-free of `MergeTreeData` storage. [#96995](https://github.com/ClickHouse/ClickHouse/pull/96995) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Build/Testing/Packaging Improvement
* Backported in [#95912](https://github.com/ClickHouse/ClickHouse/issues/95912): Use OpenSSL 3.5.5. [#95345](https://github.com/ClickHouse/ClickHouse/pull/95345) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#96734](https://github.com/ClickHouse/ClickHouse/issues/96734): Pin third-party Docker images to specific versions. [#96500](https://github.com/ClickHouse/ClickHouse/pull/96500) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NO CL CATEGORY

* Backported in [#96607](https://github.com/ClickHouse/ClickHouse/issues/96607):. [#95477](https://github.com/ClickHouse/ClickHouse/pull/95477) ([scanhex12](https://github.com/scanhex12)).

#### NO CL ENTRY

* NO CL ENTRY:  'Backport [#93827](https://github.com/ClickHouse/ClickHouse/issues/93827) to 25.12: Fix rebuilding of projections with _part_offset during merge'. [#95873](https://github.com/ClickHouse/ClickHouse/pull/95873) ([Amos Bird](https://github.com/amosbird)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#97189](https://github.com/ClickHouse/ClickHouse/issues/97189): Fix order of destruction in MergeTreeReadPoolBase. [#95393](https://github.com/ClickHouse/ClickHouse/pull/95393) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95797](https://github.com/ClickHouse/ClickHouse/issues/95797): Mark task as done without parent ProcessList task. [#95535](https://github.com/ClickHouse/ClickHouse/pull/95535) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#95861](https://github.com/ClickHouse/ClickHouse/issues/95861): Fix contention in CancellationChecker thread. [#95563](https://github.com/ClickHouse/ClickHouse/pull/95563) ([Sergei Trifonov](https://github.com/serxa)).
* Backported in [#95893](https://github.com/ClickHouse/ClickHouse/issues/95893): Fix assertion failure in `applyUncommittedState` for deltas without paths. [#95846](https://github.com/ClickHouse/ClickHouse/pull/95846) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96203](https://github.com/ClickHouse/ClickHouse/issues/96203): Allow empty order by keys in special MergeTree again. [#96058](https://github.com/ClickHouse/ClickHouse/pull/96058) ([Anton Popov](https://github.com/CurtizJ)).

