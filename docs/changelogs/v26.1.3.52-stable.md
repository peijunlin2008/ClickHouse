---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v26.1.3.52-stable (5549f2acae9) FIXME as compared to v26.1.2.11-stable (53779390caa)

#### Backward Incompatible Change
* Backported in [#96828](https://github.com/ClickHouse/ClickHouse/issues/96828): Limit S3(Azure)Queue in-memory metadata. System tables are renamed from `azure_queue` to `azure_queue_metadata_cache` and `system.s3queue` to `s3queue_metadata_cache`. [#95809](https://github.com/ClickHouse/ClickHouse/pull/95809) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#96147](https://github.com/ClickHouse/ClickHouse/issues/96147): Fix logical error on `Variant` type mismatch. [#95811](https://github.com/ClickHouse/ClickHouse/pull/95811) ([Bharat Nallan](https://github.com/bharatnc)).

#### Performance Improvement
* Backported in [#96177](https://github.com/ClickHouse/ClickHouse/issues/96177): Trim size of CachedOnDiskReadBufferFromFile structure 50x. [#96098](https://github.com/ClickHouse/ClickHouse/pull/96098) ([Azat Khuzhin](https://github.com/azat)).

#### Improvement
* Backported in [#97291](https://github.com/ClickHouse/ClickHouse/issues/97291): Schema inference now respects `allow_experimental_nullable_tuple_type`. When enabled, it allows inferred tuple types to be `Nullable(Tuple(...))`, so missing nested objects can become `NULL` instead of a tuple of `NULL` elements. [#95525](https://github.com/ClickHouse/ClickHouse/pull/95525) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#95836](https://github.com/ClickHouse/ClickHouse/issues/95836): Bump internal libxml2 to 2.15.1. [#95574](https://github.com/ClickHouse/ClickHouse/pull/95574) ([Robert Schulze](https://github.com/rschu1ze)).
* Backported in [#96034](https://github.com/ClickHouse/ClickHouse/issues/96034): Skip object storage reads when querying `DeltaLake` tables from system.tables. [#95899](https://github.com/ClickHouse/ClickHouse/pull/95899) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#96908](https://github.com/ClickHouse/ClickHouse/issues/96908): Better jemalloc introspection. [#96840](https://github.com/ClickHouse/ClickHouse/pull/96840) ([Azat Khuzhin](https://github.com/azat)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#96316](https://github.com/ClickHouse/ClickHouse/issues/96316): Remove unnecessary skip permissions check in `ATTACH` queries for a view with SQL Security. This prevents potential privilege escalation when a user attaches a view with a definer without validating required access. [#94865](https://github.com/ClickHouse/ClickHouse/pull/94865) ([pufit](https://github.com/pufit)).
* Backported in [#95806](https://github.com/ClickHouse/ClickHouse/issues/95806): Fixed type inference for qualified columns from source tables when multiple joins are used with `USING` clause. Previously, subsequent joins incorrectly updated types of underlying source columns to a common supertype even when the column was not involved in that join (e.g., in `SELECT t2.a FROM t1 LEFT JOIN t2 USING (a) LEFT JOIN t3 USING (a)`, the `t2.a` column is only used by the first join, so its type should be the supertype of `t1.a` and `t2.a`, excluding `t3.a`). This could lead to logical errors or crashes when functions expected different column types than what actually appeared in the execution plan. [#95157](https://github.com/ClickHouse/ClickHouse/pull/95157) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#96396](https://github.com/ClickHouse/ClickHouse/issues/96396): Fix a logical error in some cases when negative `LIMIT/OFFSET` is used in distributed queries. [#95357](https://github.com/ClickHouse/ClickHouse/pull/95357) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96222](https://github.com/ClickHouse/ClickHouse/issues/96222): Fix crash during `tupleElement` applied to arrays of JSON. Closes [#95581](https://github.com/ClickHouse/ClickHouse/issues/95581). [#95647](https://github.com/ClickHouse/ClickHouse/pull/95647) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#95825](https://github.com/ClickHouse/ClickHouse/issues/95825): Fix squashing partitioned delta lake data. [#95773](https://github.com/ClickHouse/ClickHouse/pull/95773) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#95852](https://github.com/ClickHouse/ClickHouse/issues/95852): Fix race condition for Nullable join column in runtime filters. [#95775](https://github.com/ClickHouse/ClickHouse/pull/95775) ([Hechem Selmi](https://github.com/m-selmi)).
* Backported in [#97187](https://github.com/ClickHouse/ClickHouse/issues/97187): Fix executing tupleElement on JSON with nested paths, previously it could lead to wrong query result. [#95907](https://github.com/ClickHouse/ClickHouse/pull/95907) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#96086](https://github.com/ClickHouse/ClickHouse/issues/96086): Fixed a `NOT_SUPPORTED` error that could occur when using the `direct` join algorithm with an empty MergeTree table. [#95935](https://github.com/ClickHouse/ClickHouse/pull/95935) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#95993](https://github.com/ClickHouse/ClickHouse/issues/95993): Fix event_date in system.asynchronous_metric_log. [#95947](https://github.com/ClickHouse/ClickHouse/pull/95947) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#96215](https://github.com/ClickHouse/ClickHouse/issues/96215): Fix skipping paths in JSON data type. Previously with `JSON(SKIP path)` all JSON keys with prefix `path` were skipped, even keys like `"pathpath"`, so it could lead to data loss for these paths during insert. Now it's fixed and only key `"path"` is skipped. [#95948](https://github.com/ClickHouse/ClickHouse/pull/95948) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#96082](https://github.com/ClickHouse/ClickHouse/issues/96082): Fix period for global profilers (controlled by `global_profiler_real_time_period_ns` and `global_profiler_cpu_time_period_ns`). Instead of set value, a truncated value was used, causing profiler to wakeup more than intended. [#96048](https://github.com/ClickHouse/ClickHouse/pull/96048) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#96189](https://github.com/ClickHouse/ClickHouse/issues/96189): Earlier if reference data file inside iceberg manifest file for position delete was present in an entry but was null, we didn't get correct bounds for a corresponding data files. This PR fixes this bug. [#96061](https://github.com/ClickHouse/ClickHouse/pull/96061) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#96544](https://github.com/ClickHouse/ClickHouse/issues/96544): Fix revoking default roles. [#96103](https://github.com/ClickHouse/ClickHouse/pull/96103) ([Vitaly Baranov](https://github.com/vitlibar)).
* Backported in [#96139](https://github.com/ClickHouse/ClickHouse/issues/96139): Fix use-after-free in the index analysis in a rare combination of disabled `use_primary_key` and a very large number of disjunctions of conditions that use the index. [#96112](https://github.com/ClickHouse/ClickHouse/pull/96112) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96159](https://github.com/ClickHouse/ClickHouse/issues/96159): Fix use-of-uninitialized-value in `formatDateTime` with non-fixed-width formatters, such as MySQL and JODA-style. [#96133](https://github.com/ClickHouse/ClickHouse/pull/96133) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97155](https://github.com/ClickHouse/ClickHouse/issues/97155): Fix `AccessRights::contains` returning incorrect results with partial revokes. [#96170](https://github.com/ClickHouse/ClickHouse/pull/96170) ([pufit](https://github.com/pufit)).
* Backported in [#96294](https://github.com/ClickHouse/ClickHouse/issues/96294): Fix query condition cache hash collision for CTE folded constants, which could lead to a wrong query result. Closes [#96060](https://github.com/ClickHouse/ClickHouse/issues/96060). [#96172](https://github.com/ClickHouse/ClickHouse/pull/96172) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96282](https://github.com/ClickHouse/ClickHouse/issues/96282): Fix possible deadlock in ProcessList. It can happen because of possible lock inversion if memory overcommit tracker triggers when we are adding task to cancellation checker. [#96182](https://github.com/ClickHouse/ClickHouse/pull/96182) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#96464](https://github.com/ClickHouse/ClickHouse/issues/96464): Fixed a bug where queries involving outer joins (LEFT, RIGHT, or FULL) combined with multiple INNER JOINs could return incorrect results due to illegal join reordering. When an outer join's ON condition referenced columns from multiple previously joined tables, the optimizer failed to account for all table dependencies and could reorder the joins incorrectly, producing missing rows. Close [#95972](https://github.com/ClickHouse/ClickHouse/issues/95972). [#96193](https://github.com/ClickHouse/ClickHouse/pull/96193) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#96273](https://github.com/ClickHouse/ClickHouse/issues/96273): Fix `optimize_syntax_fuse_functions` to not rewrite `sum/count/avg` into `sumCount()` when the aggregate argument is `LowCardinality(Nullable)`. Closes [#95390](https://github.com/ClickHouse/ClickHouse/issues/95390). [#96239](https://github.com/ClickHouse/ClickHouse/pull/96239) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96388](https://github.com/ClickHouse/ClickHouse/issues/96388): Fix incorrect partition pruning for `not IN` and `not has` function in some cases. [#96241](https://github.com/ClickHouse/ClickHouse/pull/96241) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96329](https://github.com/ClickHouse/ClickHouse/issues/96329): Fix `stack-use-after-scope` in the vector similarity index. [#96259](https://github.com/ClickHouse/ClickHouse/pull/96259) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96561](https://github.com/ClickHouse/ClickHouse/issues/96561): Fixed crash in old analyzer if JOIN and duplicated aliases. [#96405](https://github.com/ClickHouse/ClickHouse/pull/96405) ([Ilya Golshtein](https://github.com/ilejn)).
* Backported in [#96534](https://github.com/ClickHouse/ClickHouse/issues/96534): Fixes livelock in the cancellation checker thread for queries with high `max_execution_time` values. [#96450](https://github.com/ClickHouse/ClickHouse/pull/96450) ([Sergei Trifonov](https://github.com/serxa)).
* Backported in [#96854](https://github.com/ClickHouse/ClickHouse/issues/96854): Fix a logical error in some cases when fractional `LIMIT/OFFSET` is used in distributed queries. [#96475](https://github.com/ClickHouse/ClickHouse/pull/96475) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#96787](https://github.com/ClickHouse/ClickHouse/issues/96787): Fix crash order by in iceberg. Continue https://github.com/ClickHouse/ClickHouse/pull/93296. Closes [#93280](https://github.com/ClickHouse/ClickHouse/issues/93280). [#96484](https://github.com/ClickHouse/ClickHouse/pull/96484) ([scanhex12](https://github.com/scanhex12)).
* Backported in [#96629](https://github.com/ClickHouse/ClickHouse/issues/96629): Fix `LOGICAL_ERROR` exception in Parquet V3 native reader when `PREWHERE` filter column contains non-boolean UInt8 values. [#96594](https://github.com/ClickHouse/ClickHouse/pull/96594) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#96775](https://github.com/ClickHouse/ClickHouse/issues/96775): Fixed `heap-use-after-free` in `CREATE TABLE` with constraints. [#96669](https://github.com/ClickHouse/ClickHouse/pull/96669) ([Nikita Taranov](https://github.com/nickitat)).
* Backported in [#96695](https://github.com/ClickHouse/ClickHouse/issues/96695): Validate witness version in bech32 to avoid buffer overflow. [#96671](https://github.com/ClickHouse/ClickHouse/pull/96671) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#97208](https://github.com/ClickHouse/ClickHouse/issues/97208): Fix `min(timestamp)` returning epoch (`1970-01-01`) via `_minmax_count_projection` after TTL merge when all rows in a block are filtered out. [#96703](https://github.com/ClickHouse/ClickHouse/pull/96703) ([Raquel Barbadillo](https://github.com/rbarbadillo)).
* Backported in [#96921](https://github.com/ClickHouse/ClickHouse/issues/96921): Fixed `ALTER TABLE DROP COLUMN` queries failing after a lightweight update was previously performed on the same column. [#96861](https://github.com/ClickHouse/ClickHouse/pull/96861) ([Anton Popov](https://github.com/CurtizJ)).
* Backported in [#96940](https://github.com/ClickHouse/ClickHouse/issues/96940): Fix `std::terminate` exception in `indexOfAssumeSorted` when called with incompatible types (e.g., `IPv4` array with integer search value). [#96877](https://github.com/ClickHouse/ClickHouse/pull/96877) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97051](https://github.com/ClickHouse/ClickHouse/issues/97051): Fix exception `Bad cast from type DB::ColumnNullable to DB::ColumnString` when using window functions with `group_by_use_nulls = 1` and CUBE/ROLLUP/GROUPING SETS. [#96878](https://github.com/ClickHouse/ClickHouse/pull/96878) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97005](https://github.com/ClickHouse/ClickHouse/issues/97005): Fix `arrayJoin` function producing duplicate rows when used with INNER JOIN and WHERE clause, caused by the partial predicate push-down optimization incorrectly pushing filters containing `arrayJoin` below a JOIN. [#96989](https://github.com/ClickHouse/ClickHouse/pull/96989) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#97180](https://github.com/ClickHouse/ClickHouse/issues/97180): Fix logical error in `FunctionVariantAdaptor` with functions requiring const arguments like `arrayROCAUC`. [#97116](https://github.com/ClickHouse/ClickHouse/pull/97116) ([Bharat Nallan](https://github.com/bharatnc)).
* Backported in [#97260](https://github.com/ClickHouse/ClickHouse/issues/97260): Fix `LOGICAL_ERROR` exception in `FunctionVariantAdaptor` when a function operating on Variant columns returns `Nothing` type, which can happen with empty arrays in `UNION ALL` queries. [#97213](https://github.com/ClickHouse/ClickHouse/pull/97213) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Build/Testing/Packaging Improvement
* Backported in [#96736](https://github.com/ClickHouse/ClickHouse/issues/96736): Pin third-party Docker images to specific versions. [#96500](https://github.com/ClickHouse/ClickHouse/pull/96500) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NO CL CATEGORY

* Backported in [#97306](https://github.com/ClickHouse/ClickHouse/issues/97306):. [#97289](https://github.com/ClickHouse/ClickHouse/pull/97289) ([Nikita Fomichev](https://github.com/fm4v)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#97191](https://github.com/ClickHouse/ClickHouse/issues/97191): Fix order of destruction in MergeTreeReadPoolBase. [#95393](https://github.com/ClickHouse/ClickHouse/pull/95393) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95799](https://github.com/ClickHouse/ClickHouse/issues/95799): Mark task as done without parent ProcessList task. [#95535](https://github.com/ClickHouse/ClickHouse/pull/95535) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#95862](https://github.com/ClickHouse/ClickHouse/issues/95862): Fix contention in CancellationChecker thread. [#95563](https://github.com/ClickHouse/ClickHouse/pull/95563) ([Sergei Trifonov](https://github.com/serxa)).
* Backported in [#95895](https://github.com/ClickHouse/ClickHouse/issues/95895): Fix assertion failure in `applyUncommittedState` for deltas without paths. [#95846](https://github.com/ClickHouse/ClickHouse/pull/95846) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#95959](https://github.com/ClickHouse/ClickHouse/issues/95959): Add some logs to better track iceberg position deletes. [#95901](https://github.com/ClickHouse/ClickHouse/pull/95901) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#96205](https://github.com/ClickHouse/ClickHouse/issues/96205): Allow empty order by keys in special MergeTree again. [#96058](https://github.com/ClickHouse/ClickHouse/pull/96058) ([Anton Popov](https://github.com/CurtizJ)).

